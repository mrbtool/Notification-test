<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#000000" /> 
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Push Notification Test</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
</head>

<body style="font-family: sans-serif; text-align:center; padding-top:40px;">

  <h2>ðŸš€ Cloudflare Push Test</h2>

  <button onclick="subscribe()" style="padding:12px 20px; font-size:16px;">
    Enable Notifications
  </button>

  <br><br>

  <button onclick="sendTest()" style="padding:12px 20px; font-size:16px;">
    Send Test Notification
  </button>

  <script>
    const WORKER_URL = "https://temporary029.workers.dev"; // ðŸ‘ˆ PUT YOUR URL HERE

    // register service worker
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/sw.js");
    }

    let subscription = null;

    // subscribe user
    async function subscribe() {
      const reg = await navigator.serviceWorker.ready;

      subscription = await reg.pushManager.subscribe({
        userVisibleOnly: true,
        applicationServerKey: null
      });

      alert("âœ… Notifications enabled!");
    }

    // send push using worker
    async function sendTest() {
      if (!subscription) {
        alert("Click Enable Notifications first");
        return;
      }

      await fetch(WORKER_URL, {
        method: "POST",
        body: JSON.stringify(subscription)
      });

      alert("ðŸ“© Push sent!");
    }
  </script>

</body>
</html>
